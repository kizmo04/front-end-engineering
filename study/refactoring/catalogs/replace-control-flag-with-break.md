# 제어 플래그를 탈출문으로 바꾸기 (Replace Control Flag with Break)

플래그 값을 나중에 검사해 실행시키는 구조를 뒤집어, 더이상 반복문이나 함수 실행이 필요하지 않은 시점에서 `break`나 `return`문을 통해 제어 플래그를 제거하는 리팩토링

## 🗣 설명

### 🧐 As is

```ts
for (const p of people) {
  if (!found) {
    if (p === "Joker") {
      sendAlert();
      found = true;
    }
  }
}
```

### 😍 To be

```ts
for (const p of people) {
  if (p === "Joker") {
    sendAlert();
    break;
  }
}
```

### 📋 상세

주로 반복문에서, 플래그 변수는 반복문을 실행할지 말지를 결정짓거나, 결과 중에 특정 케이스가 발견됐는지 확인하는 데 자주 쓰인다. 그러나 대부분의 케이스에서 플래그 변수는 반복문 쪼개기와 탈출문으로 바꾸기를 통해 삭제할 수 있다.

### ⚙️ 절차

1. 제어 플래그를 사용하는 코드를 함수로 추출할지 고려한다.
2. 제어 플래그를 갱신하는 코드 각각을 적절한 제어문(`return`, `break`, `continue`)으로 바꾼다. 하나 바꿀 때마다 테스트 한다.
3. 모두 수정했다면 제어 플래그를 제거한다.

## 📝 메모

- 반복문에서 하는 것이 많아서 제어 플래그가 여기저기 심어져 있어야 한다면, 반복문 쪼개기를 고려해볼 시간이다.
- 저자는 `break`문이나 `continue`문 사용에 익숙치 않은 사람이 플래그를 자주 심는다고 언급했는데, 파이프라인에 익숙치 않은 사람도 플래그를 자주 심기 마련이다. 반복문 대신 파이프라인을 사용하는 경우, 제어 플래그가 제대로 먹히지 않을 것이다. 이 때 플래그를 사용해 파이프라인이 부수 효과를 일으키는 것을 고려하기 보단, `.some`, `.filter`, `.find` 등 적당한 필터 파이프라인을 앞단계에 넣어주는 것이 좋을 것이다. (더 가다듬기 참고)
